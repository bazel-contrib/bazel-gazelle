---
platforms:
  ubuntu1804:
    run_targets:
    - "//:gazelle -- --mode=diff"
    build_targets:
    - "..."
    test_targets:
    - "..."
  ubuntu1604:
    run_targets:
    - "//:gazelle -- --mode=diff"
    build_targets:
    - "..."
    test_targets:
    - "..."
  macos:
    run_targets:
    - "//:gazelle -- --mode=diff"
    build_targets:
    - "..."
    test_targets:
    - "..."
  windows:
    run_targets:
    - "//:gazelle -- --mode=diff"
    build_targets:
    - "--"
    - "..."
    - "-//cmd/autogazelle/..."
    test_targets:
    - "--"
    - "..."
    # autogazelle is only supported on UNIX-like platforms.
    # It requires UNIX domain sockets.
    - "-//cmd/autogazelle/..."
    # Stardoc produces different line-endings on windows,
    # so the documentation it generates doesn't match the checked in files
    - "-//docs:all"
    # Fails to execute, apparently due to command-line length limit.
    - "-//internal:bazel_test"
